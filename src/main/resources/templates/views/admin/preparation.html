<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport"
		  content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>GIT - Impro diapo</title>
	<link rel="stylesheet" 		type="text/css" href="/css/style.css" />
	<link rel="stylesheet/less" type="text/css" href="/css/views/admin/preparation.less" />
	<link rel="stylesheet/less" type="text/css" href="/css/views/admin/preparation-categories.less" />
	<link rel="stylesheet/less" type="text/css" href="/css/views/admin/preparation-musiques.less" />
	<link rel="stylesheet/less" type="text/css" href="/css/views/admin/preparation-videos.less" />
	<link rel="stylesheet/less" type="text/css" href="/css/views/admin/preparation-divers.less" />
	<link rel="stylesheet" 		type="text/css" href="/css/jquery-ui/jquery-ui.css"/>
	<link rel="stylesheet/less" type="text/css" href="/css/image-viewer.less" />

	<link rel="shortcut icon" HREF="/images/logo/git_logo_rose.png" />

	<script type="text/javascript" src="/js/jquery.js"></script>
	<script type="text/javascript" src="/js/common.js"></script>
	<script type="text/javascript" src="/js/jquery-ui.js"></script>
	<script type="text/javascript" src="/js/less.js"></script>
	<script type="text/javascript" src="/js/screens/preparation/preparation.js"></script>
	<script type="text/javascript" src="/js/screens/preparation/preparation.datas.js"></script>
	<script type="text/javascript" src="/js/image-viewer.js"></script>
</head>
<body id="newImpro" class="admin">
<h1>Préparation d'une impro</h1>

<div id="back">
	<a href="/">Retour à l'accueil</a>
</div>

<menu>
	<nav id="categorie_tab">Catégories</nav>
	<nav id="musiques_tab">Musiques</nav>
	<nav id="videos_tab">Vidéos</nav>
	<nav id="divers_tab">Divers</nav>
</menu>
<script type="text/javascript" src="/js/screens/preparation/preparation.updateLists.js"></script>

	<main>
		<!-- Catégories -->
		<section id="categorie_tab_main" class="tab">
			<form id="importCategories" class="importForm" onsubmit="return false;">
				Fichier(s) ZIP contenant les fichiers à importer : <input id="inputImportCategorie" type="file" name="file" accept=".zip" multiple="multiple" />
				<button class="submitChanges" onClick="uploadCategories(); return false;">Envoyer</button>
			</form>

			<form action="#" method="post" onsubmit="return false;">
				<div class="submitButton">
					<button class="submitChanges sendCategoriesForm">Enregistrer les modifications</button>
				</div>

				<div id="categories">
					<h2>Liste des catégories</h2>
					<input type="hidden" name="action" value="update" />

					<span class="loading">Loading...</span>
					<ul id="categoriesList">
					</ul>
				</div>

				<div id="remerciements">
					<h2>Texte de remerciements (<span id="nb_max_chars"></span> caractères max)</h2>
					<h3>"Un grand merci : "</h3>
					<input type="hidden" id="remerciements_id" />
					<textarea id="remerciements_texte" name="remerciements_texte" cols="60" rows="2" maxlength="70">Loading...</textarea>
					<p id="textarea_remaining_chars"><span id="nb_remaining_chars"></span> caractères restants.</p>
				</div>

				<div id="dates">
					<h2>Prochaines dates <button onClick="newDate(); return false;">Ajouter</button></h2>
					<span class="loading">Loading...</span>
					<ul id="datesList">
					</ul>
				</div>

				<div class="submitButton">
					<button class="submitChanges sendCategoriesForm">Enregistrer les modifications</button>
				</div>

			</form>
		</section>



		<!-- Musiques -->
		<section id="musiques_tab_main" class="tab">
			<div id="importMusiqueDiv">
				<h2>Musiques</h2>
				<form id="importMusique" class="importForm" onsubmit="return false;">
					Musique(s) ou fichier(s) ZIP à importer : <input id="inputImportPlaylist" type="file" name="file" accept=".mp3,.wav,.ogg,.zip" multiple="multiple" />
					<button class="submitChanges" onClick="uploadSongs(); return false;">Envoyer</button>
				</form>

				<button class="submitChanges deleteSongs" onClick="deleteSelectedSongs();">Supprimer</button>
				<table>
					<thead>
						<tr>
							<th><input type="checkbox" onClick="$('section#musiques_tab_main table input[type=checkbox].actionMusique').prop('checked', this.checked);" /></th>
							<th>Titre</th>
							<th> </th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>


			<!-- Jingles -->
			<div id="importJinglesDiv">
				<h2>Jingles</h2>
				<form id="importJingles" class="importForm" onsubmit="return false;">
					Jingle(s) ou fichier(s) ZIP à importer : <input id="inputImportJingle" type="file" name="file" accept=".mp3,.wav,.ogg,.zip" multiple="multiple" />
					<button class="submitChanges" onClick="uploadJingles(); return false;">Envoyer</button>
				</form>

				<button class="submitChanges deleteSongs" onClick="deleteSelectedJingles();">Supprimer</button>
				<table>
					<thead>
					<tr>
						<th><input type="checkbox" onClick="$('section#jingles_tab_main table input[type=checkbox].actionCheck').prop('checked', this.checked);" /></th>
						<th>Titre</th>
						<th> </th>
					</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</section>



		<!-- Vidéos -->
		<section id="videos_tab_main" class="tab">
			<div id="video_joueurs" class="video">
				<h2>Joueurs</h2>
				<div class="videoTag">
					<video controls="controls" preload="auto">
						<source src="" originalSrc="/handler/videos/intro/joueurs.mp4" type="video/mp4" />
					</video>
				</div>
				<form id="importVideoJoueurs" onsubmit="return false;">
					<input id="inputVideoJoueurs" type="file" name="file" accept=".mp4" />
					<button class="submitChanges" onClick="uploadVideo('importVideoJoueurs', 'joueurs'); return false;">Envoyer</button>
				</form>
			</div>
			<div id="video_presentateur" class="video">
				<h2>Présentateur</h2>
				<div class="videoTag">
					<video controls="controls" preload="auto">
						<source src="" originalSrc="/handler/videos/intro/presentateur.mp4" type="video/mp4" />
					</video>
				</div>
				<form id="importVideoPresentateur" onsubmit="return false;">
					<input id="inputVideoPresentateur" type="file" name="file" accept=".mp4" />
					<button class="submitChanges" onClick="uploadVideo('importVideoPresentateur', 'presentateur'); return false;">Envoyer</button>
				</form>
			</div>
		</section>

		<!-- Divers -->
		<section id="divers_tab_main" class="tab">
            <div id="photos_divers">
                <h2>Photos annexes</h2>
                <ul>
                    <li>
                        <span class="divers_titre">Intro</span>
                        <span class="span-icon icon-picture" onClick="showDiversPictures(INTRO_PICTURES, 'intro');"></span>
                        <span id="divers_intro_nb_pictures" class="nbPictures">-</span>
                        <form id="importImagesIntro" onsubmit="return false;">
                            <input id="inputImagesintro" type="file" name="file" accept=".jpg, .jpeg, .png, .bmp, .gif, .zip" multiple="multiple" />
                            <button class="submitChanges" onClick="uploadZip('/preparation/images/intro', 'importImagesIntro', () => uploadDiversImageCallback('intro')); return false;">Envoyer</button>
                        </form>
                    </li>
					<li>
                        <span class="divers_titre">Dates</span>
                        <span class="span-icon icon-picture" onClick="showDiversPictures(DATES_PICTURES, 'dates');"></span>
                        <span id="divers_dates_nb_pictures" class="nbPictures">-</span>
                        <form id="importImagesDates" onsubmit="return false;">
                            <input id="inputImagesdates" type="file" name="file" accept=".jpg, .jpeg, .png, .bmp, .gif, .zip" multiple="multiple" />
                            <button class="submitChanges" onClick="uploadZip('/preparation/images/dates', 'importImagesDates', () => uploadDiversImageCallback('dates')); return false;">Envoyer</button>
                        </form>
                    </li>
					<li>
                        <span class="divers_titre">Joueurs</span>
                        <span class="span-icon icon-picture" onClick="showDiversPictures(JOUEURS_PICTURES, 'joueurs');"></span>
                        <span id="divers_joueurs_nb_pictures" class="nbPictures">-</span>
                        <form id="importImagesJoueurs" onsubmit="return false;">
                            <input id="inputImagesjoueurs" type="file" name="file" accept=".jpg, .jpeg, .png, .bmp, .gif, .zip" multiple="multiple" />
                            <button class="submitChanges" onClick="uploadZip('/preparation/images/joueurs', 'importImagesJoueurs', () => uploadDiversImageCallback('joueurs')); return false;">Envoyer</button>
                        </form>
                    </li>
                </ul>
            </div>
		</section>

	</main>

	<div id="hiddenClones" style="display : none;">
		<ul>
			<li class="ui-state-default" id="cat_clone">
				<span class="ui-icon ui-icon-arrowthick-2-n-s"></span>
				
				<span class="help id_tech" title="Id technique"></span>
				<input type="hidden" class="categorie_id" name="categorie_id[]" value="" />
				<input type="text" class="categorie_nom" name="categorie_nom[]" value="" />
				
				<span class="type">
					Type : 
					<select class="categorie_type" name="categorie_type[]">
						<option th:each="categorie : ${ categorieTypes }"
								th:value="${ categorie.code }"
								th:text="${ categorie.label }">-- Category text --</option>
					</select>
				</span>
				<span class="chemin">
					<span>
					Chemin :
					</span>
					<input type="text" class="categorie_path" name="categorie_path[]" value="" />
				</span>
				<span class="pictures">
					<span class="span-icon icon-picture"></span>
					<span class="nb-picture"></span>
				</span>
				
				<a class="delete" href="#" onClick="removeCategorie($(this).parents('li')); return false;">
					[X]
				</a>
			</li>
			<li id="date_clone">
				<input type="hidden" class="date_date date_id_hidden" name="date_id[]" maxlength="10" placeholder="Date" value="" />
				<input type="text" class="date_date date_date_input" name="date_date[]" maxlength="10" placeholder="Date" value="" />
				<input type="text" class="date_nom date_nom_input" name="date_nom[]" maxlength="40" placeholder="Nom de l'évènement" value="" />
				<a class="delete" href="#" onClick="removeDate($(this).parents('li')); return false;">
					[X]
				</a>
			</li>
		</ul>
	</div>

	<div id="loading">
		Chargement...
	</div>
	
</body>
</html>